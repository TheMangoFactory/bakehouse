<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Bakehouse by martypitt</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Bakehouse</h1>
        <p>Streamlines web pre-processors for Spring resources</p>
        <p class="view"><a href="https://github.com/martypitt/bakehouse">View the Project on GitHub <small>martypitt/bakehouse</small></a></p>
        <ul>
          <li><a href="https://github.com/martypitt/bakehouse/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/martypitt/bakehouse/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/martypitt/bakehouse">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>Bakehouse - cooks up your HTML resources for you.</h3>

<p>Bakehouse is a framework for moving pre-processing of web artifacts to the server.</p>

<p>In a typical web project these days, you're likely to have a bunch of tasks that run on your artifacts.</p>

<p>Eg:</p>

<ul>
<li><a href="http://lesscss.org/">Less for your CSS</a></li>
<li><a href="https://developers.google.com/closure/compiler/">Concatenate and minify your Javascript</a></li>
<li>Maybe even use some <a href="http://www.typescriptlang.org/">Typescript</a> or <a href="http://coffeescript.org/">CoffeeScript</a>, which needs to be compiled</li>
</ul><p>However, the type of processing you want to apply often varies between Production and Development environments.  (Eg., non-minified code in dev, serve from a CDN in prod).</p>

<p>Bakehouse uses Spring's <code>@Configuration @Profile</code>'s to allow you to specify different deployment configs at runtime.</p>

<p>For example:</p>

<pre><code>&lt;%@ taglib prefix="bakehouse" uri="http://www.mangofactory.com/bakehouse" %&gt;
&lt;head&gt;
    &lt;bakehouse:resource src="angular.js" cdn="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"/&gt;
    &lt;bakehouse:resources configuration="javascript" type="text/javascript"&gt;
        &lt;bakehouse:resource src="file1.js"/&gt;
        &lt;bakehouse:resource src="file2.js"/&gt;
    &lt;/bakehouse:resources&gt;
    &lt;bakehouse:resources configuration="typescript" type="text/javascript"&gt;
        &lt;bakehouse:resource src="typescript.ts"/&gt;
    &lt;/bakehouse:resources&gt;
&lt;/head&gt;
</code></pre>

<p>With our resources wrapped in <code>&lt;bakehouse:... /&gt;</code> tags, we can define multiple configurations depending on the environment we're running in.</p>

<p>For example -- in production:</p>

<pre><code>@Configuration
@Profile("production")
public class ExampleBakehouseConfig implements BakehouseConfigProvider {

    @Override @Bean
    public BakehouseConfig build(BakehouseConfigBuilder builder) {
        return builder
            .process("javascript").serveAsSingleFile("AppCode.js")
            .process("typescript").with(new TypescriptProcessor("TypescriptCode.js"))
            .serveResourcesFromCdn()
            .build();
    }
}
</code></pre>

<p>This specifies:</p>

<ul>
<li>Process the <code>javascript</code> group, concatenating into a single file, called <code>AppCode.js</code>
</li>
<li>Process the <code>typescript</code> group, compiling the typescript into a single file called <code>TypescriptCode.js</code>
</li>
<li>Download any resources with <code>cdn</code> addresses from their relative cdn's (eg., the <code>angularjs</code> resource)</li>
</ul><p>Alternatively, in Dev ---</p>

<pre><code>@Configuration
@Profile("development")
public class ExampleBakehouseConfig implements BakehouseConfigProvider {

    @Override @Bean
    public BakehouseConfig build(BakehouseConfigBuilder builder) {
        return builder
            .process("typescript").with(new TypescriptProcessor("TypescriptCode.js"))
            .build();
    }
}
</code></pre>

<p>Here:</p>

<ul>
<li>
<code>javascript</code> resources aren't processed, so will be served 'as-is`</li>
<li>Process the <code>typescript</code> group, compiling the typescript into a single file called <code>TypescriptCode.js</code>
</li>
<li>CDN resources are ignored, so we'll be serving the local non-minified versions.</li>
</ul><h3>Project state</h3>

<p>This is a POC project.  You're welcome to grab the code and play around with it (the above examples all work), but I'm not committed to actively working on the project unless there's demand.</p>

<p>Register your interest in seeing this get expanded by either <a href="https://github.com/martypitt/bakehouse">starring the project</a> or <a href="https://github.com/martypitt/bakehouse/issues/4">leave a comment showing you're interested</a>.</p>

<p>Alternatively, have a play, raise some issues, and submit some pull requests with enhancements.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/martypitt">martypitt</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-37456009-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>